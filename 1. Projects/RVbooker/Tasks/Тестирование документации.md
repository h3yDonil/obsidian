#### **1. Общая цель и назначение системы**

**RV Booker** — это полнофункциональная система бронирования отелей, предназначенная для:

**Бизнес-цели:**

- **Автоматизация** процесса бронирования номеров
    
- **Централизованное управление** отелями и бронированиями
    
- **Удобный интерфейс** для клиентов а какие критерии удобства?
    
- **Интеграция** с внешними системами через REST API
    
- **Мониторинг и аналитика** в реальном времени
    
- **Масштабируемость** под отельные сети что за масштабируемость? под какие сети?
    

**Целевая аудитория:**

- Конечные пользователи
    
- Менеджеры отелей
    
- Администраторы какие администраторы?
    
- Разработчики (интеграции через API) не поняла как разработчики могут быть целевой аудиторией
    

---

#### **2. Ключевые бизнес-процессы**

**2.1 Регистрация и аутентификация**

**Регистрация:**

1. Ввод username, email, password, имя, фамилия, телефон (
    
    1. Добавить требования к полям, например:
        
    
    - username:
        
        - Минимальное количество символов: 6, максимальное: 20
            
        - Разрешенные символы:
            
            - Буквы: Unicode (все алфавитные символы включая кириллицу, латиницу и др. например китайские буквы или арабские)
                
            - Нижнее подчеркивание (user_name)
                
            - Дефис (user-name)
                
            - Цифры
                
    - email
        
        - Формат: local-part@domain
            
        - Максимальное количество символов: 254 (для защиты от Dos атак с длинными строками)
            
        - После регистрации на введенный email отправляется письмо с ссылкой, по которой пользователь должен перейти для подтверждения того что адрес существует и работает, и пользователь имеет к нему доступ
            
    - password
        
        - Минимальное количество символов: 8, максимальное: 128 (защита от Dos атак)
            
        - Только ASCII символы (латиница, спецсимволы и цифры)
            
        - Должен иметь по крайней мере:
            
            - 1 букву в нижнем регистре
                
            - 1 букву в верхнем регистре
                
            - 1 спецсимвол
                
            - 1 цифру
                
        - При вводе символы должны отображаться замаскированными, например в виде точек, с опцией "Показать пароль" для удобства
            
        - Должен хешироваться перед сохранением в базу данных (алгоритм хеширования Argon2 или bcrypt)
            
    - Имя, Фамилия
        
        - Минимальное количество символов: 2, максимальное: 50
            
        - Разрешенные символы:
            
            - Буквы: Unicode (все алфавитные символы включая кириллицу, латиницу и др. например китайские буквы или арабские)
                
            - Пробелы
                
            - Дефисы - для имен вроде "Анна-Мария"
                
            - Апострофы - для имен вроде "O'Connor"
                
    - Номер телефона
        
        - Можно вводить только цифры в формате +7-(XXX)-XXX-XX-XX)
            
2. Валидация данных
    
3. Создание аккаунта (роль USER, manager, admin)
    
4. Выдача JWT токена на сколько времени?
    
5. Переход в личный кабинет
    

**Авторизация:**

1. Ввод username/email и пароля
    
2. Проверка данных
    
3. Выдача JWT токена (24ч)
    
4. Обновление поля last_login_at
    
5. Доступ к защищённым разделам что за разделы? у каких ролей должен быть этот доступ?
    

---

**2.2 Поиск и бронирование**

**Поиск:**

1. Ввод критериев (город, даты, гости)
    
2. Поиск номеров
    
3. Фильтрация (звёзды, цена, удобства)
    
4. Пагинация
    

**Бронирование:**

1. Выбор отеля и номера
    
2. Ввод даты, гостей, контактов
    
3. Проверка доступности
    
4. Расчёт стоимости
    
5. Создание бронирования (PENDING)
    
6. Kafka + Telegram уведомления
    
7. Переход на страницу подтверждения
    

---

**2.3 Управление бронированиями**

**Статусы бронирования:**

- PENDING, CONFIRMED, CANCELLED, COMPLETED
    

**Статусы оплаты:**

- PENDING, PARTIAL, PAID, REFUNDED
    

**Изменение статуса:**

- Менеджер/админ меняет статус
    
- Обновление БД
    
- Kafka + Telegram + логирование в OpenSearch
    

---

#### **3. Роли пользователей и права доступа**

|   |   |   |
|---|---|---|
||||
|Роль|Права|Ограничения|
|USER|Поиск и создание бронирований, редактирование профиля|Не управляет отелями, не видит чужие брони|
|MANAGER|Все права USER + управление номерами и статусами своих отелей|Только свои отели, не управляет пользователями|
|ADMIN|Полный доступ ко всей системе|—|

---

#### **4. Примеры бизнес-сценариев**

**4.1 Создание бронирования**

Пользователь бронирует номер:

- Поиск отеля
    
- Выбор "Deluxe Suite" на 2 ночи
    
- Ввод контактов
    
- Система проверяет доступность и создаёт бронирование (PENDING)
    
- Kafka → booking.created, Telegram → менеджеру
    
- Менеджер подтверждает → статус: CONFIRMED
    

Альтернативы:

- Номер занят → показать альтернативы
    
- Ошибки валидации
    
- Ошибки при расчёте оплаты
    

---

**4.2 Управление отелем (ADMIN)**

- Вход в админ-панель
    
- Создание нового отеля ("Luxury Hotel Sochi")
    
- Добавление типов номеров, удобств
    
- Создание физ. номеров
    
- Активация отеля
    

---

#### **5. Архитектура и компоненты**

**Frontend:**

- React 19, TS, Material UI, Vite
    
- Production: [http://localhost:3000](http://localhost:3000/)
    
- Dev: [http://localhost:5173](http://localhost:5173/)
    

**Backend (API):**

- Node.js, Express.js, PostgreSQL
    
- [http://localhost:3002](http://localhost:3002/)
    
- Swagger: [http://localhost:3002/api-docs/](http://localhost:3002/api-docs/)
    

**Инфраструктура:**

- PostgreSQL (localhost:5432)
    
- Kafka (localhost:9092)
    
- OpenSearch (localhost:9200)
    
- Kafka UI: [http://localhost:8081](http://localhost:8081/)
    
- OpenSearch Dashboards: [http://localhost:5601](http://localhost:5601/)